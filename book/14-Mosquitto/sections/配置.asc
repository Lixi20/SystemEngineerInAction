=== 配置

加入环境变量：

[source, bash]
----
ln -s /usr/local/mosquitto-1.6.9/bin/* /usr/loca/bin/
ln -s /usr/local/mosquitto-1.6.9/sbin/* /usr/loca/bin/
----

创建用户：

[source, bash]
useradd -c "mosquitto server user" -d /var/lib/mosquitto -s /sbin/nologin  mosquitto

创建配置文件：

[source, bash]
----
cp /etc/mosquitto/mosquitto.conf.example /etc/mosquitto/mosquitto.conf
sed -i '588s/#log_dest stderr/log_dest file \/var\/log\/mosquitto.log/g' /etc/mosquitto/mosquitto.conf
touch /var/log/mosquitto.log
chown mosquitto:mosquitto /var/log/mosquitto.log
----

创建系统服务：

[source, bash]
----
cat << EOF > /usr/lib/systemd/system/mosquitto.service
[Unit]
Description=Eclipse Mosquitto - An open source MQTT broker
After=network.target remote-fs.target nss-lookup.target

[Service]
Type=forking

User=mosquitto
Group=mosquitto
ExecStart=/usr/local/mosquitto-1.6.9/sbin/mosquitto -d -c /etc/mosquitto/mosquitto.conf -v

[Install]
WantedBy=multi-user.target
EOF

systemctl enable mosquitto
----

启动服务：

[source, bash]
----
systemctl start mosquitto
systemctl status mosquitto
----
